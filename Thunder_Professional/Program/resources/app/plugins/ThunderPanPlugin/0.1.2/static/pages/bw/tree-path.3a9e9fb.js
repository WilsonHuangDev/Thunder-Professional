/*! For license information please see ../../LICENSES */
(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{1e3:function(e,t,n){var o=n(1002);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,n(88).default)("4421b217",o,!0,{sourceMap:!1})},1001:function(e,t,n){"use strict";var o=n(1e3);n.n(o).a},1002:function(e,t,n){(t=n(87)(!1)).push([e.i,"body .td-dialog .td-dialog__close:hover{background-color:#ff7b5f}body .td-dialog h2{color:#1a1a1a}body .td-dialog .xly-dialog__footer{position:relative;display:flex;justify-content:flex-end;width:100%}body .td-dialog .xly-dialog__footer .xly-dialog-path__new{width:90px}body .td-dialog .xly-dialog__footer-operate{position:absolute;left:0;display:flex;align-items:center;height:30px}body .td-dialog .xly-dialog__footer-link{color:var(--color-primary)}body .td-dialog .xly-dialog__button{display:flex}body .td-dialog .xly-dialog__button .td-button{width:80px;font-size:12px}body .xly-dialog-site{margin-top:15px}body .xly-dialog-site .td-select{margin-top:12px}body .xly-dialog-site .td-select.is-checked .xly-select__file{color:var(--color-primary)}body .xly-dialog-site .td-select.is-checked .xly-select__file:hover{color:var(--color-hover)}body .xly-dialog-site .td-select .td-checkbox{margin-left:12px}body .xly-dialog-site .td-select .td-checkbox__label{margin:0 12px;color:var(--color-primary)}body .xly-dialog-site .td-select .td-select__drop{margin-right:34px}body .xly-dialog-site .xly-select__file{position:absolute;right:8px;color:var(--color-primary)}body .xly-dialog-site .xly-select__size{margin-right:10px;color:var(--color-secondary)}body .xly-dialog-site .xly-select__size.is-warn{color:#ff9700}body .xly-dialog-site .xly-select__size.is-danger{color:var(--color-danger)}body .xly-dialog-site .xly-select__link{position:absolute;top:2px;left:80px;width:calc(100% - 110px);line-height:26px;text-indent:5px;color:var(--color-primary);background:#fff}body .xly-dialog-site .td-input__inner{padding:6px 10px}.xly-dialog-site__checkbox{margin:12px 0 0}",""]),e.exports=t},1007:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var o=n(1012);function r(e){return Object(o.createDecorator)((function(t,n){if(!t.methods)throw new Error("This decorator must be used on a vue component method.");var o="number"==typeof e?e:e.time,r=t.methods[n],i=0,a=function(){i&&(clearTimeout(i),i=0)};t.methods[n]=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];a(),i=setTimeout((function(){i=0,r.apply(e,t)}),o)}}))}},1012:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=(o=n(3))&&"object"==typeof o&&"default"in o?o.default:o,i="undefined"!=typeof Reflect&&Reflect.defineMetadata;function a(e,t,n){(n?Reflect.getOwnMetadataKeys(t,n):Reflect.getOwnMetadataKeys(t)).forEach((function(o){var r=n?Reflect.getOwnMetadata(o,t,n):Reflect.getOwnMetadata(o,t);n?Reflect.defineMetadata(o,r,e,n):Reflect.defineMetadata(o,r,e)}))}var c={__proto__:[]}instanceof Array;var l=["data","beforeCreate","created","beforeMount","mounted","beforeDestroy","destroyed","beforeUpdate","updated","activated","deactivated","render","errorCaptured"];function d(e,t){void 0===t&&(t={}),t.name=t.name||e._componentTag||e.name;var n=e.prototype;Object.getOwnPropertyNames(n).forEach((function(e){if("constructor"!==e)if(l.indexOf(e)>-1)t[e]=n[e];else{var o=Object.getOwnPropertyDescriptor(n,e);void 0!==o.value?"function"==typeof o.value?(t.methods||(t.methods={}))[e]=o.value:(t.mixins||(t.mixins=[])).push({data:function(){var t;return(t={})[e]=o.value,t}}):(o.get||o.set)&&((t.computed||(t.computed={}))[e]={get:o.get,set:o.set})}})),(t.mixins||(t.mixins=[])).push({data:function(){return function(e,t){var n=t.prototype._init;t.prototype._init=function(){var t=this,n=Object.getOwnPropertyNames(e);if(e.$options.props)for(var o in e.$options.props)e.hasOwnProperty(o)||n.push(o);n.forEach((function(n){"_"!==n.charAt(0)&&Object.defineProperty(t,n,{get:function(){return e[n]},set:function(t){e[n]=t},configurable:!0})}))};var o=new t;t.prototype._init=n;var r={};return Object.keys(o).forEach((function(e){void 0!==o[e]&&(r[e]=o[e])})),r}(this,e)}});var o=e.__decorators__;o&&(o.forEach((function(e){return e(t)})),delete e.__decorators__);var d,s,u=Object.getPrototypeOf(e.prototype),f=u instanceof r?u.constructor:r,p=f.extend(t);return function(e,t,n){Object.getOwnPropertyNames(t).forEach((function(o){if("prototype"!==o){var r=Object.getOwnPropertyDescriptor(e,o);if(!r||r.configurable){var i,a,l=Object.getOwnPropertyDescriptor(t,o);if(!c){if("cid"===o)return;var d=Object.getOwnPropertyDescriptor(n,o);if(i=l.value,a=typeof i,null!=i&&("object"===a||"function"===a)&&d&&d.value===l.value)return}0,Object.defineProperty(e,o,l)}}}))}(p,e,f),i&&(a(d=p,s=e),Object.getOwnPropertyNames(s.prototype).forEach((function(e){a(d.prototype,s.prototype,e)})),Object.getOwnPropertyNames(s).forEach((function(e){a(d,s,e)}))),p}function s(e){return"function"==typeof e?d(e):function(t){return d(t,e)}}s.registerHooks=function(e){l.push.apply(l,e)},t.default=s,t.createDecorator=function(e){return function(t,n,o){var r="function"==typeof t?t:t.constructor;r.__decorators__||(r.__decorators__=[]),"number"!=typeof o&&(o=void 0),r.__decorators__.push((function(t){return e(t,n,o)}))}},t.mixins=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r.extend({mixins:e})}},1042:function(e,t,n){var o=n(1114);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,n(88).default)("28c488d2",o,!0,{sourceMap:!1})},1043:function(e,t,n){var o=n(1116);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,n(88).default)("47d474a5",o,!0,{sourceMap:!1})},1113:function(e,t,n){"use strict";var o=n(1042);n.n(o).a},1114:function(e,t,n){(t=n(87)(!1)).push([e.i,"body .xly-dialog-path{width:450px;padding:0 18px 18px}body .xly-dialog-path h2{padding:13px 0;text-align:left}.xly-dialog-path__content{border-radius:4px;border:1px solid var(--color-border)}.xly-dialog-path__content .td-tree{margin-right:2px;height:200px;overflow-y:auto}.xly-dialog-path__content .td-tree::-webkit-scrollbar{width:10px;background:transparent}.xly-dialog-path__content .td-tree::-webkit-scrollbar:horizontal{height:10px}.xly-dialog-path__content .td-tree::-webkit-scrollbar-thumb{border-radius:2px;width:10px;background:#d9d9d9}.xly-dialog-path__content .td-tree::-webkit-scrollbar-thumb:hover{background:hsla(0,0%,80%,.8)}body .xly-dialog-path .td-tree-node{cursor:default}body .xly-dialog-path .td-tree-node__content{height:30px}body .xly-dialog-path .td-tree-node__label{margin-left:7px}body .xly-dialog-path .td-tree-node__image-icon{margin-left:10px}body .xly-dialog-path .td-tree-node.is-disabled{color:#ccc}body .xly-dialog-path .td-tree-node.is-disabled .td-tree-node__image-icon{opacity:.5}body .xly-dialog-path .td-tree-node__expand-icon{margin-left:6px}",""]),e.exports=t},1115:function(e,t,n){"use strict";var o=n(1043);n.n(o).a},1116:function(e,t,n){(t=n(87)(!1)).push([e.i,".td-tree-node__image-icon{background-size:cover}",""]),e.exports=t},1223:function(e,t,n){"use strict";n.r(t);n(7),n(8),n(33),n(19),n(82),n(547),n(34),n(38),n(6);var o=n(98),r=n(99),i=n(160),a=n(159),c=n(111),l=(n(2),n(55)),d=n(112),s=n(5),u=n(3),f=n(1007),p=n(12),h=n(0);function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Object(c.a)(e);if(t){var r=Object(c.a)(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return Object(a.a)(this,n)}}var v=function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===("undefined"==typeof Reflect?"undefined":Object(l.a)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},b=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function a(e){try{l(o.next(e))}catch(e){i(e)}}function c(e){try{l(o.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}l((o=o.apply(e,t||[])).next())}))},g=function(e){Object(i.a)(n,e);var t=y(n);function n(){var e;return Object(o.a)(this,n),(e=t.apply(this,arguments)).visible=!1,e.selectVueTreeNode=null,e.visibleCreateOrRenameDialog=!1,e.eventId=0,e}return Object(r.a)(n,[{key:"show",value:function(){this.visible=!0}},{key:"emit",value:function(){this.visible=!1,this.$destroy(),this.resolve(this.selectVueTreeNode)}},{key:"handleCreateDirectory",value:function(){this.callerInstance.$eventTrack("yunpan_move_copy_pop_click",{type:this.moveOrCopy,clickid:"new_floder"});var e=this.$refs.tree;e&&e.chosenNode&&(e.chosenNode.mode="create")}},{key:"mounted",value:function(){var e=this,t=this.$refs.tree,n=t.$children;t.chosenNode=n[0],this.handleChangeChosenNode(t.chosenNode),this.eventId=h.a.attachServerEvent("OnLogout",(function(){e.close()}))}},{key:"beforeDestroy",value:function(){h.a.detachServerEvent("OnLogout",this.eventId)}},{key:"handleChangeChosenNode",value:function(e){this.selectVueTreeNode=e}},{key:"handleConfirmCreateDirectory",value:function(e){var t=e.chosenNode,n=e.content;return b(this,void 0,void 0,regeneratorRuntime.mark((function e(){var o,r,i=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.callerInstance.$store.dispatch("drive/addFolderWithParentId",{name:n,parentId:t.node.id});case 3:if(!(o=e.sent).file){e.next=8;break}return e.next=7,h.a.callRemoteClientFunction("ThunderPanPluginWebview","IpcRefreshDirectory",{id:t.node.id});case 7:this.$nextTick((function(){var e=Object.assign(Object.assign({},o.file),{leaf:!0,__order:-t.node.children.length,__level:t.node.__level+1,title:o.file.name,icon:o.file.icon_link});t.node.children.push(e),t.node.children.sort((function(e,t){return e.__order-t.__order})),i.$nextTick((function(){var t=i.findVueInstanceNodeById(e.id);i.handleChangeChosenNode(t),i.$refs.tree.chosenNode=t}))}));case 8:e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),r=Object(p.safeJSONParse)(e.t0.message),this.$message.error(r.error_description);case 14:case"end":return e.stop()}}),e,this,[[0,10]])})))}},{key:"loadFunction",value:function(e){var t;return b(this,void 0,void 0,regeneratorRuntime.mark((function n(){var o,r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(""!==e.id){n.next=2;break}return n.abrupt("return");case 2:return n.prev=2,n.next=5,Object(s.n)(e.id);case 5:if(o=n.sent,(null===(t=null==o?void 0:o.files)||void 0===t?void 0:t.length)||(e.leaf=!0),r=o.files){n.next=10;break}return n.abrupt("return");case 10:return r.forEach((function(e,t){e.__order=t,e.title=e.name,e.icon=e.icon_link,e.leaf="drive#file"===e.kind})),n.abrupt("return",r);case 14:n.prev=14,n.t0=n.catch(2),console.log(n.t0);case 17:return n.abrupt("return",[]);case 18:case"end":return n.stop()}}),n,null,[[2,14]])})))}},{key:"bindingKeyGenerator",value:function(e){return e.id}},{key:"close",value:function(){this.visible=!1,this.$destroy(),this.reject()}},{key:"findVueInstanceNodeById",value:function(e){for(var t=[this.$refs.tree];t.length>0;)for(var n=t.shift(),o=0;o<n.$children.length;o++){var r=n.$children[o];if(r.node){if(r.node.id===e)return r;t.push(r)}}}}]),n}(d.Vue);v([Object(d.Prop)({})],g.prototype,"resolve",void 0),v([Object(d.Prop)({})],g.prototype,"reject",void 0),v([Object(d.Prop)({})],g.prototype,"data",void 0),v([Object(d.Prop)({})],g.prototype,"callerInstance",void 0),v([Object(d.Prop)({})],g.prototype,"disableFunction",void 0),v([Object(d.Prop)({})],g.prototype,"disableClass",void 0),v([Object(d.Prop)({})],g.prototype,"moveOrCopy",void 0),v([Object(f.a)({time:10})],g.prototype,"handleConfirmCreateDirectory",null);var _,x=g=v([Object(d.Component)({})],g),m=(n(1001),n(1113),n(1115),n(123)),O=Object(m.a)(x,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("td-dialog",{attrs:{"custom-class":"xly-dialog-path",visible:e.visible},on:{"update:visible":function(t){e.visible=t},ok:function(t){e.visible=!1},close:e.close}},[n("h2",{staticStyle:{"-webkit-app-region":"drag"},attrs:{slot:"header"},slot:"header"},[e._v("\n    选择云盘保存路径\n  ")]),e._v(" "),n("div",{staticClass:"xly-dialog-path__content"},[n("td-tree-plus",{ref:"tree",attrs:{data:e.data,"level-padding":20,lazy:!0,load:e.loadFunction,"binding-key-generator":e.bindingKeyGenerator,"disable-function":e.disableFunction,"disable-class":e.disableClass,"default-placeholder":"新建文件夹"},on:{changeChosenNode:e.handleChangeChosenNode,create:e.handleConfirmCreateDirectory}})],1),e._v(" "),n("div",{staticClass:"xly-dialog__footer",attrs:{slot:"footer"},slot:"footer"},[n("div",{staticClass:"xly-dialog__footer-operate"},[n("td-button",{staticClass:"td-button--other xly-dialog-path__new",on:{click:e.handleCreateDirectory}},[e._v("\n        新建文件夹\n      ")])],1),e._v(" "),n("div",{staticClass:"xly-dialog__button"},[n("td-button",{on:{click:e.emit}},[e._v("\n        确定\n      ")]),e._v(" "),n("td-button",{staticClass:"td-button--other",on:{click:e.close}},[e._v("\n        取消\n      ")])],1)])])}),[],!1,null,null,null).exports,w=u.default.extend(O),k=function(e,t,n){!function(e){_=new w({el:document.createElement("div"),propsData:Object.assign({},e.props)})}(e),_.resolve=t,_.reject=n,document.body.appendChild(_.$el),u.default.nextTick((function(){_.show()}))},j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(t,n){k(e,t,n)}))},P=n(37);function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Object(c.a)(e);if(t){var r=Object(c.a)(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return Object(a.a)(this,n)}}var C=function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===("undefined"==typeof Reflect?"undefined":Object(l.a)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},N=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function a(e){try{l(o.next(e))}catch(e){i(e)}}function c(e){try{l(o.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}l((o=o.apply(e,t||[])).next())}))},E=function(e){Object(i.a)(n,e);var t=R(n);function n(){var e;return Object(o.a)(this,n),(e=t.apply(this,arguments)).data=[],e.disabledNodeIdList=[],e}return Object(r.a)(n,[{key:"mounted",value:function(){var e;return N(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,o,r,i,a,c,l=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.disabledNodeIdList=window.__disableIdList__||[],n=[],t.prev=2,t.next=5,Object(s.n)("");case 5:if(o=t.sent,null===(e=null==o?void 0:o.files)||void 0===e?void 0:e.length){t.next=8;break}return t.abrupt("return");case 8:n=o.files,t.next=14;break;case 11:t.prev=11,t.t0=t.catch(2),console.warn(t.t0);case 14:return t.prev=14,this.data=[{id:"",children:n,title:"我的云盘",expand:!0,icon:"https://backstage-img-ssl.a.88cdn.com/019fc2a136a2881181e73fea74a4836efc02195d"}],this.data[0].children.forEach((function(e,t){P.SYSTEM_FOLDER_TYPE_LIST.includes(e.folder_type)?e.__order=Number.MIN_SAFE_INTEGER+P.SYSTEM_FOLDER_TYPE_LIST.indexOf(e.folder_type):e.__order=t,e.title=e.name,e.icon=e.icon_link,e.leaf="drive#file"===e.kind})),this.data[0].children.sort((function(e,t){return e.__order-t.__order})),t.prev=18,t.next=21,j({props:{data:this.data,callerInstance:this,bindingKeyGenerator:function(e){return e.id},disableClass:"is-disabled",disableFunction:function(e){return l.disabledNodeIdList.includes(e.id)},defaultPlaceholder:"新建文件夹"}});case 21:if(!(r=t.sent)){t.next=33;break}for(i=[],a=r.node.id,c=r;c.$parent.node;)i.push({id:c.node.id,title:c.node.title}),c=c.$parent;return i.push({id:c.node.id,title:c.node.title}),i.reverse(),t.next=31,h.a.callRemoteClientFunction("ThunderPanPluginWebview","TreePath",{parentId:a,path:i,chosenNode:r.node});case 31:t.next=35;break;case 33:return t.next=35,h.a.callRemoteClientFunction("ThunderPanPluginWebview","TreePath",{error:"chosenNode is empty"});case 35:window.close(),t.next=43;break;case 38:return t.prev=38,t.t1=t.catch(18),t.next=42,h.a.callRemoteClientFunction("ThunderPanPluginWebview","TreePath",{error:"close window"});case 42:window.close();case 43:t.next=48;break;case 45:t.prev=45,t.t2=t.catch(14),console.error(t.t2);case 48:case"end":return t.stop()}}),t,this,[[2,11],[14,45],[18,38]])})))}}]),n}(d.Vue),T=E=C([Object(d.Component)({head:{title:"选择保存路径"}})],E),D=Object(m.a)(T,(function(){var e=this.$createElement;return(this._self._c||e)("div")}),[],!1,null,null,null);t.default=D.exports}}]);
//# sourceMappingURL=tree-path.3a9e9fb.js.map