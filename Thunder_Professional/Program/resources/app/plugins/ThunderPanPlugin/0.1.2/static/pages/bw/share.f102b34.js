(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{1e3:function(e,t,i){var o=i(1002);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,i(88).default)("4421b217",o,!0,{sourceMap:!1})},1001:function(e,t,i){"use strict";var o=i(1e3);i.n(o).a},1002:function(e,t,i){(t=i(87)(!1)).push([e.i,"body .td-dialog .td-dialog__close:hover{background-color:#ff7b5f}body .td-dialog h2{color:#1a1a1a}body .td-dialog .xly-dialog__footer{position:relative;display:flex;justify-content:flex-end;width:100%}body .td-dialog .xly-dialog__footer .xly-dialog-path__new{width:90px}body .td-dialog .xly-dialog__footer-operate{position:absolute;left:0;display:flex;align-items:center;height:30px}body .td-dialog .xly-dialog__footer-link{color:var(--color-primary)}body .td-dialog .xly-dialog__button{display:flex}body .td-dialog .xly-dialog__button .td-button{width:80px;font-size:12px}body .xly-dialog-site{margin-top:15px}body .xly-dialog-site .td-select{margin-top:12px}body .xly-dialog-site .td-select.is-checked .xly-select__file{color:var(--color-primary)}body .xly-dialog-site .td-select.is-checked .xly-select__file:hover{color:var(--color-hover)}body .xly-dialog-site .td-select .td-checkbox{margin-left:12px}body .xly-dialog-site .td-select .td-checkbox__label{margin:0 12px;color:var(--color-primary)}body .xly-dialog-site .td-select .td-select__drop{margin-right:34px}body .xly-dialog-site .xly-select__file{position:absolute;right:8px;color:var(--color-primary)}body .xly-dialog-site .xly-select__size{margin-right:10px;color:var(--color-secondary)}body .xly-dialog-site .xly-select__size.is-warn{color:#ff9700}body .xly-dialog-site .xly-select__size.is-danger{color:var(--color-danger)}body .xly-dialog-site .xly-select__link{position:absolute;top:2px;left:80px;width:calc(100% - 110px);line-height:26px;text-indent:5px;color:var(--color-primary);background:#fff}body .xly-dialog-site .td-input__inner{padding:6px 10px}.xly-dialog-site__checkbox{margin:12px 0 0}",""]),e.exports=t},1037:function(e,t,i){var o=i(1103);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,i(88).default)("57af285a",o,!0,{sourceMap:!1})},1102:function(e,t,i){"use strict";var o=i(1037);i.n(o).a},1103:function(e,t,i){(t=i(87)(!1)).push([e.i,"body .xly-dialog-share{width:500px}body .xly-dialog-share .td-select+.xly-dialog-share__label{margin-left:32px}body .xly-dialog-share .td-select-group{width:144px}body .xly-dialog-share .td-input__label{margin-right:10px}body .xly-dialog-share .td-dropdown-menu{max-height:120px;box-shadow:0 0 10px 0 rgba(26,26,26,.2);border:unset;overflow-y:auto}body .xly-dialog-share .td-dropdown-menu::-webkit-scrollbar{width:8px;background:transparent}body .xly-dialog-share .td-dropdown-menu::-webkit-scrollbar:horizontal{height:8px}body .xly-dialog-share .td-dropdown-menu::-webkit-scrollbar-thumb{border-radius:2px;width:6px;background:#e6e6e6}body .xly-dialog-share .td-dropdown-menu::-webkit-scrollbar-thumb:hover{background:#ccc}body .xly-dialog-share .xly-input--link{display:flex;align-items:center;flex:1}body .xly-dialog-share .xly-input--link .td-input__inner{flex:1}body .xly-dialog-share .xly-input--code{margin-left:20px}body .xly-dialog-share .xly-input--code .td-input__inner{width:72px}body .xly-dialog-share .xly-icon-success-fill{margin-right:6px;color:#00b36a}body .xly-dialog-share h2{text-align:left}.xly-dialog-share__name{display:inline-block;max-width:17em;vertical-align:top;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;word-break:break-all}.xly-dialog-share__form{margin-top:10px}.xly-dialog-share__form .xly-dialog-share__form-item{display:flex;flex-wrap:wrap;align-items:center;margin-bottom:24px}.xly-dialog-share__form .xly-dialog-share__code{padding-left:60px;margin-top:6px;width:100%;box-sizing:border-box}.xly-dialog-share__form .td-select:nth-child(0){margin-right:32px}.xly-dialog-share__label{width:60px}.xly-dialog-share__tips{margin-left:12px;color:var(--color-secondary)}.xly-dialog-share__footer{padding-top:6px;width:100%}.xly-dialog-share__footer p{margin-top:12px;text-align:center;font-size:11px;color:var(--color-secondary)}",""]),e.exports=t},1225:function(e,t,i){"use strict";i.r(t);i(7),i(8),i(33),i(19),i(6),i(531);var o=i(98),a=i(99),l=i(160),r=i(159),s=i(111),n=(i(2),i(55)),d=i(112),c=i(11),u=i(288),p=i(246),y=i(12);function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,o=Object(s.a)(e);if(t){var a=Object(s.a)(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return Object(r.a)(this,i)}}var x=function(e,t,i,o){var a,l=arguments.length,r=l<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===("undefined"==typeof Reflect?"undefined":Object(n.a)(Reflect))&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(l<3?a(r):l>3?a(t,i,r):a(t,i))||r);return l>3&&r&&Object.defineProperty(t,i,r),r},h=function(e,t,i,o){return new(i||(i=Promise))((function(a,l){function r(e){try{n(o.next(e))}catch(e){l(e)}}function s(e){try{n(o.throw(e))}catch(e){l(e)}}function n(e){var t;e.done?a(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,s)}n((o=o.apply(e,t||[])).next())}))},g=function(e){Object(l.a)(i,e);var t=f(i);function i(){var e;return Object(o.a)(this,i),(e=t.apply(this,arguments)).isCreating=!1,e.isCreated=!1,e.visible=!0,e.timesOptions=Object.freeze(["不限","1次","2次","3次","4次","5次","6次","7次","8次","9次","10次","11次","12次","13次","14次","15次","16次","17次","18次","19次","20次"]),e.timesValue="不限",e.daysOptions=Object.freeze(["不限","1天","2天","3天","4天","5天","6天","7天"]),e.daysValue="不限",e.shareLink="",e.shareCode="",e.files=[],e}return Object(a.a)(i,[{key:"createShareLink",value:function(){return h(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,i,o=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!0!==this.isCreating){e.next=2;break}return e.abrupt("return");case 2:this.isCreating=!0,t=this.timesOptions.indexOf(this.timesValue),i=this.daysOptions.indexOf(this.daysValue),Object(u.c)({file_ids:this.fileIds,share_to:"copy",title:"云盘资源分享",restore_limit:String(0===t?-1:t),expiration_days:String(0===i?-1:i)}).then((function(e){o.isCreated=!0,o.shareLink=e.share_url||"",o.shareCode=e.pass_code||"",o.copyIntoClipboard(o.shareLink,o.shareCode),o.$eventTrack("share_finish",{result:"success",num_limit:t,time_limit:i})})).catch((function(e){o.$message({message:Object(y.getErrorDescription)(e),type:"error",position:"middle",duration:1e3}),o.$eventTrack("share_finish",{result:"fail",num_limit:t,time_limit:i})})).finally((function(){o.isCreating=!1}));case 6:case"end":return e.stop()}}),e,this)})))}},{key:"copyIntoClipboard",value:function(e,t){p.clipboard.writeText("链接：".concat(e,"\n提取码：").concat(t))}},{key:"focusInput",value:function(e){this.$refs[e].select()}},{key:"onCopyClicked",value:function(){this.copyIntoClipboard(this.shareLink,this.shareCode),this.$message({message:"复制成功",position:"middle",type:"success",duration:3e3})}},{key:"closeWindow",value:function(){window.close()}},{key:"created",value:function(){return h(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return window.client=c.client,e.next=3,c.client.callRemoteClientFunction("ThunderPanPluginWebview","GetShareFiles");case 3:void 0===(t=e.sent)[1]?this.files=t[0]||[]:console.error(t[1]);case 5:case"end":return e.stop()}}),e,this)})))}},{key:"fileIds",get:function(){return this.files.map((function(e){return e.id||""}))}},{key:"fileNames",get:function(){return this.files.map((function(e){return e.name||""})).join("，")}}]),i}(d.Vue),_=g=x([Object(d.Component)({head:{title:"分享文件"}})],g),b=(i(1001),i(1102),i(123)),m=Object(b.a)(_,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("td-dialog",{attrs:{"custom-class":"xly-dialog-task xly-dialog-share",visible:e.visible},on:{"update:visible":function(t){e.visible=t},ok:function(t){e.visible=!1},close:e.closeWindow}},[i("h2",{staticStyle:{"-webkit-app-region":"drag"},attrs:{slot:"header"},slot:"header"},[e._v("\n    分享文件："),i("span",{staticClass:"xly-dialog-share__name"},[e._v(e._s(e.fileNames))]),e._v(e._s("（共"+e.files.length+"项）")+"\n  ")]),e._v(" "),i("div",{staticClass:"xly-dialog-share__form"},[e.isCreated?[i("ul",[i("li",{staticClass:"xly-dialog-share__form-item"},[i("i",{staticClass:"xly-icon-success-fill"}),e._v(" 分享链接以及提取码已复制\n          "),i("span",{staticClass:"xly-dialog-share__tips"},[e._v("可通过QQ、微信、微博、邮箱等分享给好友")])]),e._v(" "),i("li",{staticClass:"xly-dialog-share__form-item"},[i("td-input",{ref:"link",staticClass:"xly-input--link",attrs:{label:"链接",readonly:"readonly"},on:{focus:function(t){return e.focusInput("link")}},model:{value:e.shareLink,callback:function(t){e.shareLink=t},expression:"shareLink"}}),e._v(" "),i("td-input",{ref:"code",staticClass:"xly-input--code",attrs:{label:"提取码",readonly:"readonly"},on:{focus:function(t){return e.focusInput("code")}},model:{value:e.shareCode,callback:function(t){e.shareCode=t},expression:"shareCode"}})],1)])]:[i("ul",[i("li",{staticClass:"xly-dialog-share__form-item"},[i("span",{staticClass:"xly-dialog-share__label"},[e._v("分享形式")]),e._v(" "),i("td-radio",[e._v("有提取码")]),e._v(" "),i("span",{staticClass:"xly-dialog-share__tips"},[e._v("仅限拥有提取码者查看，更安全")])],1),e._v(" "),i("li",{staticClass:"xly-dialog-share__form-item"},[i("span",{staticClass:"xly-dialog-share__label"},[e._v("提取次数")]),e._v(" "),i("td-select",{attrs:{placeholder:"请选择",options:e.timesOptions,"mark-selected":""},model:{value:e.timesValue,callback:function(t){e.timesValue=t},expression:"timesValue"}}),e._v(" "),i("span",{staticClass:"xly-dialog-share__label"},[e._v("提取期限")]),e._v(" "),i("td-select",{attrs:{placeholder:"请选择",options:e.daysOptions,"mark-selected":""},model:{value:e.daysValue,callback:function(t){e.daysValue=t},expression:"daysValue"}})],1)])]],2),e._v(" "),i("div",{staticClass:"xly-dialog-share__footer",attrs:{slot:"footer"},slot:"footer"},[e.isCreated||e.isCreating?e.isCreating?[i("td-button",{attrs:{size:"large",status:"","status-icon":"loading"}},[e._v("\n        创建中\n      ")])]:[i("td-button",{attrs:{size:"large"},on:{click:e.onCopyClicked}},[e._v("\n        复制链接及提取码\n      ")])]:[i("td-button",{attrs:{size:"large"},on:{click:e.createShareLink}},[e._v("\n        创建链接\n      ")])],e._v(" "),i("p",{attrs:{slot:"footer"},slot:"footer"},[e._v("\n      配合净网行动，迅雷严厉打击不良、色情低俗信息的传播，如发现，或将封号处理。\n    ")])],2)])}),[],!1,null,null,null);t.default=m.exports}}]);
//# sourceMappingURL=share.f102b34.js.map